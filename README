git clone https://github.com/jswhit/replay_observer
cd replay_observer
git submodule update --init --recursive # to checkout build_gsinfo submodule

config.sh is main script, hpss.sh is script to archive on hpss
${machine}_preamble is job scheduler preamble for config.sh
${machine}_preamble_hpss is job scheduler preamble for hpss.sh
submit_job.sh <machine> submits config.sh (which then submits itself and hpss.sh).
most of GSI namelist parameters set in run_gsi_4denvar.sh, some in config.sh.

To cold start, create an initial directory in the experiment directory (i.e <expthome>/YYYYMMDDHH)
touch an empty file (touch <expthome>/YYYYMMDDHH/cold_start_bias).  This will tell the scripts
that there is no initial bias correction file.  To generate initial bias files with zeros,
run build_gsinfo/initbias.py with a satinfo file generated by createsatinfo.sh for the first date
of your experiment.  Copy the generated zero_abias, zero_abias_pc files to gdas.tHHz.abias, gdas.tHHz.abias_pc 
to <expthome>/YYYYMMDDHH. Create an empty aircraft bias correction file by touching gdas.tHHz.abias_air.

Create analdate.sh in the top level experiment directory (<expthome>).
analdate.csh should contain
"export analdate=YYYYMMDDHH_start" and "export analdate_end=YYYYMMDDHH_end", where YYYYMMDDHH_start,_end are the
dates you want the experiment to start and end.

gsi.x executable needs to be in exec_<machine>


Problems that can occur:
1) job to get obs/backgrounds from AWS fails, because of slow network connection or problem to data transfer queue).  Resubmit.
2) GSI fails when reading aircraft bias correction (gdas.tHHz.abias_air file). Entry has non alphanumeric characters (usually in 
aircraft ID).  Delete that entry and resubmit (or copy abias_air file from previous analysis time).
3) GSI fails when reading radiance bias correction (gdas.tHHz.abias file).  Bias correction coefficient overflows format 
statement (i.e. value becomes less than -9999.999, so that '***' appears in file). Reset value to -9000.000 and resubmit.
4) Job times out due to slow filesystem.  Resubmit.
